<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #a7c598; -webkit-text-stroke: #a7c598}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #d4d4d4; -webkit-text-stroke: #d4d4d4}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #36c0a0; -webkit-text-stroke: #36c0a0}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #b76ff7; -webkit-text-stroke: #b76ff7}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s9 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s13 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s14 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s15 {font-kerning: none; color: #ee2e38; background-color: #171818; -webkit-text-stroke: 0px #ee2e38}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Cluster-Chaos: The ACM Simulation</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.gstatic.com"</span><span class="s4"> </span><span class="s2">crossorigin</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=Roboto+Mono:wght@400;500&amp;display=swap"</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">sans-serif</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #111827</span><span class="s7">;</span><span class="s1"> </span><span class="s9">/* bg-gray-900 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #F9FAFB</span><span class="s7">;</span><span class="s1"> </span><span class="s9">/* text-gray-50 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.font-mono</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s8">'Roboto Mono'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">monospace</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.card</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">transform</span><span class="s4"> </span><span class="s10">0.2s</span><span class="s4"> </span><span class="s1">ease-in-out</span><span class="s7">,</span><span class="s4"> </span><span class="s1">box-shadow</span><span class="s4"> </span><span class="s10">0.2s</span><span class="s4"> </span><span class="s1">ease-in-out</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.card:hover</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">-10px</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s4"> </span><span class="s1">0</span><span class="s4"> </span><span class="s1">10px</span><span class="s4"> </span><span class="s1">15px</span><span class="s4"> </span><span class="s1">-3px</span><span class="s4"> </span><span class="s5">rgba(</span><span class="s1">0</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0.2</span><span class="s5">)</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0</span><span class="s4"> </span><span class="s1">4px</span><span class="s4"> </span><span class="s1">6px</span><span class="s4"> </span><span class="s1">-2px</span><span class="s4"> </span><span class="s5">rgba(</span><span class="s1">0</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0</span><span class="s7">,</span><span class="s4"> </span><span class="s1">0.1</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.console-log-entry</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-left-width:</span><span class="s4"> </span><span class="s10">4px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding-left:</span><span class="s1"> </span><span class="s10">0.75rem</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.log-info</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">border-color:</span><span class="s1"> #3B82F6</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s9">/* blue-500 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.log-action</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">border-color:</span><span class="s1"> #22C55E</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s9">/* green-500 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.log-chaos</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">border-color:</span><span class="s1"> #EF4444</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s9">/* red-500 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.log-warn</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">border-color:</span><span class="s1"> #F59E0B</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s9">/* amber-500 */</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.cluster-spoke</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s1"> </span><span class="s5">all</span><span class="s1"> </span><span class="s10">0.3s</span><span class="s1"> </span><span class="s5">ease</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.cluster-spoke</span><span class="s4"> </span><span class="s1">.status-dot</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">background-color</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#modal-overlay</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">opacity</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease-in-out</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#modal-content</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">transform</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease-in-out</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.modal-hidden</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s10">0</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">pointer-events:</span><span class="s4"> </span><span class="s5">none</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.modal-hidden</span><span class="s4"> </span><span class="s1">#modal-content</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">scale(</span><span class="s10">0.95</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-screen h-screen overflow-hidden flex flex-col p-4 gap-4"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- MAIN GAME UI --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">main</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-grow flex gap-4 h-[calc(100%-150px)]"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- LEFT: STATUS PANEL --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"status-panel"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-1/4 h-full bg-gray-800 rounded-lg p-4 flex flex-col gap-4 overflow-y-auto"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-center border-b border-gray-700 pb-2"</span><span class="s3">&gt;</span><span class="s4">Status Report</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-2 gap-4 text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-400"</span><span class="s3">&gt;</span><span class="s1">Day</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"turn-display"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold"</span><span class="s3">&gt;</span><span class="s4">1 / 30</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-400"</span><span class="s3">&gt;</span><span class="s1">Actions</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"actions-display"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold"</span><span class="s3">&gt;</span><span class="s4">2</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-400"</span><span class="s3">&gt;</span><span class="s1">Compute Units ($CU)</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"cu-display"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-green-400"</span><span class="s3">&gt;</span><span class="s4">5</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-400"</span><span class="s3">&gt;</span><span class="s1">Projects Done</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"projects-display"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold"</span><span class="s3">&gt;</span><span class="s4">0 / 5</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-gray-400 text-center mb-1"</span><span class="s3">&gt;</span><span class="s4">System Stability</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full bg-gray-700 rounded-full h-6"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stability-bar"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-blue-600 h-6 rounded-full text-center text-white font-bold text-sm transition-all duration-500"</span><span class="s4"> </span><span class="s2">style</span><span class="s3">=</span><span class="s1">"width: 100%;"</span><span class="s3">&gt;</span><span class="s4">100</span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"active-project-container"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gray-900 rounded-lg p-3 flex-grow flex flex-col"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-bold text-center mb-2"</span><span class="s3">&gt;</span><span class="s4">Active Project</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"active-project-card"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-grow flex flex-col justify-center items-center text-center"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;!-- Project card content will be injected here --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"end-day-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"</span><span class="s3">&gt;</span><span class="s4">End Day</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- CENTER: CLUSTER MAP --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-1/2 h-full flex flex-col gap-4"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-xl font-bold text-center"</span><span class="s3">&gt;</span><span class="s1">Hybrid Cloud Environment</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"cluster-map"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-grow bg-gray-800 rounded-lg p-4 relative grid grid-cols-3 grid-rows-3 gap-4"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Hub in the center --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"col-start-2 row-start-2 flex justify-center items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-32 h-32 bg-gray-900 rounded-full flex justify-center items-center text-center font-bold text-lg border-4 border-blue-500"</span><span class="s3">&gt;</span><span class="s4">The Hub</span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Spokes will be injected here --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- RIGHT: CONSOLE LOG --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-1/4 h-full bg-gray-800 rounded-lg p-4 flex flex-col"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-center border-b border-gray-700 pb-2"</span><span class="s3">&gt;</span><span class="s4">Console Log</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"console-log"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-grow mt-2 overflow-y-auto flex flex-col-reverse"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Log entries will be prepended here --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">main</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- BOTTOM: PLAYER HAND --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"h-[180px] w-full bg-gray-800 rounded-lg p-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-bold text-center mb-2"</span><span class="s3">&gt;</span><span class="s4">Your Hand (Max 5)</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"player-hand"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex gap-4 justify-center items-center h-full"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Player cards will be injected here --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- MODAL POPUP --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-overlay"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center modal-hidden"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-content"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gray-800 rounded-lg p-8 max-w-lg text-center transform"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-title"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold mb-4"</span><span class="s3">&gt;&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-text"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-gray-300 mb-6"</span><span class="s3">&gt;&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-button"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"</span><span class="s3">&gt;</span><span class="s4">Start Game</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s12">const</span><span class="s1"> cardDefinitions </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Player Deck Cards</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>player</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Cluster Cards</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Provision OpenShift'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Cluster'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">4</span><span class="s7">,</span><span class="s4"> clusterType</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'On-Prem'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Deploy a new OpenShift cluster to the On-Prem Datacenter.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Provision EKS'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Cluster'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">3</span><span class="s7">,</span><span class="s4"> clusterType</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'AWS'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Deploy a new EKS cluster to the AWS region.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Provision AKS'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Cluster'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">3</span><span class="s7">,</span><span class="s4"> clusterType</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Azure'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Deploy a new AKS cluster to the Azure region.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Provision GKE'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Cluster'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">3</span><span class="s7">,</span><span class="s4"> clusterType</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'GCP'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Deploy a new GKE cluster to the GCP region.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Provision K3s Edge'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Cluster'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">2</span><span class="s7">,</span><span class="s4"> clusterType</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Edge Site 1'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Deploy a new K3s cluster to Edge Site 1.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Provision K3s Edge'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Cluster'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">2</span><span class="s7">,</span><span class="s4"> clusterType</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Edge Site 2'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Deploy a new K3s cluster to Edge Site 2.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Action Cards</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'GitOps Rollout'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Action'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">2</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Fixes "Configuration Drift" on a cluster OR deploys a project requirement.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Fleet Observability'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Action'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">1</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Look at the top 3 cards of the Chaos deck. Put one at the bottom.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Disaster Recovery'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Action'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">3</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Play immediately after a Chaos Event damages a cluster to negate its effects and gain 5 Stability.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Scale Up'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Action'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">0</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Gain 3 $CU immediately. A quick budget injection.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Expert Consultation'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Action'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">2</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Draw 2 cards. A fresh perspective.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Policy Cards</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Implement GitOps Standard'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Policy'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">3</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'For the next 5 turns, gain +5 Stability when you deploy a project requirement.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Standardize Security Posture'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Policy'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">4</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'The Stability loss from all future "Security Vulnerability" events is halved.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Automated Auditing'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Policy'</span><span class="s7">,</span><span class="s4"> cost</span><span class="s7">:</span><span class="s4"> </span><span class="s13">3</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'At the end of your turn, if you have no clusters with negative statuses, gain +3 Stability.'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">],</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Project Cards</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>projects</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s1"> name</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Deploy New CRM Platform'</span><span class="s7">,</span><span class="s1"> requirements</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'GCP'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'On-Prem'</span><span class="s7">],</span><span class="s1"> reward</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">15</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s1"> name</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Migrate Legacy Database'</span><span class="s7">,</span><span class="s1"> requirements</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'AWS'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'On-Prem'</span><span class="s7">],</span><span class="s1"> reward</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">15</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s1"> name</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Launch E-Commerce Site'</span><span class="s7">,</span><span class="s1"> requirements</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'AWS'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Azure'</span><span class="s7">],</span><span class="s1"> reward</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">15</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Retail Store IoT Rollout'</span><span class="s7">,</span><span class="s4"> requirements</span><span class="s7">:</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Edge Site 1'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Edge Site 2'</span><span class="s7">],</span><span class="s4"> reward</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> stability</span><span class="s7">:</span><span class="s4"> </span><span class="s13">20</span><span class="s4"> </span><span class="s7">}</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s1"> name</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'AI/ML Analytics Engine'</span><span class="s7">,</span><span class="s1"> requirements</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'GCP'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'AWS'</span><span class="s7">],</span><span class="s1"> reward</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">20</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s1"> name</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Internal DevOps Platform'</span><span class="s7">,</span><span class="s1"> requirements</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'On-Prem'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Azure'</span><span class="s7">],</span><span class="s1"> reward</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">15</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s1"> name</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Supply Chain Tracker'</span><span class="s7">,</span><span class="s1"> requirements</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'Edge Site 1'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'On-Prem'</span><span class="s7">],</span><span class="s1"> reward</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">15</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">],</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Chaos Event Cards</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>chaos</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Configuration Drift!'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A random cluster is now drifting. Stability drops by 2 each turn until fixed with "GitOps Rollout".'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'drift'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Security Vulnerability!'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Major CVE announced. Pay 3 $CU for emergency patching or lose 20 Stability.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'vulnerability'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Expired Certs!'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A random cluster is offline. It produces no resources until you pay 2 $CU to fix.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'certs'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Network Outage!'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A random cluster produces no $CU next turn.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'outage'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Sudden Budget Cut!'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'The CFO strikes! Lose half of your current $CU, rounded down.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'budget_cut'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'All Hands Meeting!'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'You are stuck in a pointless meeting. You only have 1 Action this turn.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'meeting'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A Moment of Calm'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A rare quiet day. Gain 5 Stability.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'calm'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A Moment of Calm'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A rare quiet day. Gain 5 Stability.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'calm'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A Moment of Calm'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A rare quiet day. Gain 5 Stability.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'calm'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">{</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Failed Deployment'</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Chaos'</span><span class="s7">,</span><span class="s4"> text</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'A random cluster with a deployed project part goes offline. The project part is removed.'</span><span class="s7">,</span><span class="s4"> effect</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'failed_deployment'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">]</span></p>
<p class="p9"><span class="s1">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">const</span><span class="s1"> clusterLocations </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s7">{</span><span class="s4"> id</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'On-Prem'</span><span class="s7">,</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'On-Prem Datacenter'</span><span class="s7">,</span><span class="s4"> grid</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'col-start-2 row-start-1'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s7">{</span><span class="s4"> id</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'AWS'</span><span class="s7">,</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'AWS'</span><span class="s7">,</span><span class="s4"> grid</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'col-start-1 row-start-1'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s7">{</span><span class="s4"> id</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Azure'</span><span class="s7">,</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Azure'</span><span class="s7">,</span><span class="s4"> grid</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'col-start-1 row-start-2'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s7">{</span><span class="s4"> id</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'GCP'</span><span class="s7">,</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'GCP'</span><span class="s7">,</span><span class="s4"> grid</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'col-start-1 row-start-3'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s7">{</span><span class="s4"> id</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Edge Site 1'</span><span class="s7">,</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Edge Site 1'</span><span class="s7">,</span><span class="s4"> grid</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'col-start-3 row-start-1'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s7">{</span><span class="s4"> id</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Edge Site 2'</span><span class="s7">,</span><span class="s4"> name</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Edge Site 2'</span><span class="s7">,</span><span class="s4"> grid</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'col-start-3 row-start-3'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p9"><span class="s1">];</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">let</span><span class="s1"> gameState </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// DOM Elements</span></p>
<p class="p10"><span class="s12">const</span><span class="s4"> </span><span class="s1">DOMElements</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>turn</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'turn-display'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>actions</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'actions-display'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>cu</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'cu-display'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>projects</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'projects-display'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>stabilityBar</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'stability-bar'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>activeProjectCard</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'active-project-card'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>endDayBtn</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'end-day-btn'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>clusterMap</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'cluster-map'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>consoleLog</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'console-log'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>playerHand</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'player-hand'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>modal</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>overlay</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-overlay'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>content</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-content'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>title</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-title'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>text</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-text'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>button</span><span class="s7">:</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-button'</span><span class="s7">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// --- UTILITY FUNCTIONS ---</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> shuffle</span><span class="s7">(</span><span class="s1">array</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> array</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> </span><span class="s13">1</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">--)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> j </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s1">i </span><span class="s7">+</span><span class="s1"> </span><span class="s13">1</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">[</span><span class="s1">array</span><span class="s7">[</span><span class="s1">i</span><span class="s7">],</span><span class="s1"> array</span><span class="s7">[</span><span class="s1">j</span><span class="s7">]]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s1">array</span><span class="s7">[</span><span class="s1">j</span><span class="s7">],</span><span class="s1"> array</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">return</span><span class="s1"> array</span><span class="s7">;</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> logToConsole</span><span class="s7">(</span><span class="s1">message</span><span class="s7">,</span><span class="s1"> type </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> entry </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'div'</span><span class="s7">);</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span>entry</span><span class="s7">.</span><span class="s4">classList</span><span class="s7">.</span><span class="s4">add</span><span class="s7">(</span><span class="s1">'console-log-entry'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">`log-</span><span class="s7">${</span><span class="s4">type</span><span class="s7">}</span><span class="s1">`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'mb-2'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'text-sm'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>entry</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`&lt;p class="font-bold"&gt;[DAY </span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">turn</span><span class="s7">}</span><span class="s8">]&lt;/p&gt;&lt;p&gt;</span><span class="s7">${</span><span class="s1">message</span><span class="s7">}</span><span class="s8">&lt;/p&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">consoleLog</span><span class="s7">.</span><span class="s1">prepend</span><span class="s7">(</span><span class="s1">entry</span><span class="s7">);</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> showModal</span><span class="s7">(</span><span class="s1">title</span><span class="s7">,</span><span class="s1"> text</span><span class="s7">,</span><span class="s1"> buttonText</span><span class="s7">,</span><span class="s1"> callback</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">title</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> title</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">text</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> text</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">button</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> buttonText</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">button</span><span class="s7">.</span><span class="s1">onclick </span><span class="s7">=</span><span class="s1"> callback</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">overlay</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'modal-hidden'</span><span class="s7">);</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> hideModal</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">overlay</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'modal-hidden'</span><span class="s7">);</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// --- GAME STATE &amp; RENDERING ---</span></p>
<p class="p11"><span class="s1">function</span><span class="s4"> init</span><span class="s7">()</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>turn</span><span class="s7">:</span><span class="s1"> </span><span class="s13">1</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>maxTurns</span><span class="s7">:</span><span class="s1"> </span><span class="s13">30</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>cu</span><span class="s7">:</span><span class="s1"> </span><span class="s13">5</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>stability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">100</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>maxStability</span><span class="s7">:</span><span class="s1"> </span><span class="s13">100</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>actions</span><span class="s7">:</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>maxActions</span><span class="s7">:</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>projectsCompleted</span><span class="s7">:</span><span class="s1"> </span><span class="s13">0</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>targetProjects</span><span class="s7">:</span><span class="s1"> </span><span class="s13">5</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>hand</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>handLimit</span><span class="s7">:</span><span class="s1"> </span><span class="s13">5</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>playerDeck</span><span class="s7">:</span><span class="s1"> shuffle</span><span class="s7">([...</span><span class="s1">cardDefinitions</span><span class="s7">.</span><span class="s1">player</span><span class="s7">,</span><span class="s1"> </span><span class="s7">...</span><span class="s1">cardDefinitions</span><span class="s7">.</span><span class="s1">player</span><span class="s7">]),</span><span class="s1"> </span><span class="s9">// Double the deck for more variety</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>projectsDeck</span><span class="s7">:</span><span class="s1"> shuffle</span><span class="s7">([...</span><span class="s1">cardDefinitions</span><span class="s7">.</span><span class="s1">projects</span><span class="s7">]),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chaosDeck</span><span class="s7">:</span><span class="s1"> shuffle</span><span class="s7">([...</span><span class="s1">cardDefinitions</span><span class="s7">.</span><span class="s1">chaos</span><span class="s7">,</span><span class="s1"> </span><span class="s7">...</span><span class="s1">cardDefinitions</span><span class="s7">.</span><span class="s1">chaos</span><span class="s7">]),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>activeProject</span><span class="s7">:</span><span class="s1"> </span><span class="s12">null</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span>clusters</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{},</span><span class="s4"> </span><span class="s1">// Keyed by location ID</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span>activePolicies</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{},</span><span class="s4"> </span><span class="s1">// e.g., { gitops: 5, security: true }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameOver</span><span class="s7">:</span><span class="s1"> </span><span class="s12">false</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Initialize clusters</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>clusterLocations</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">loc </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">loc</span><span class="s7">.</span><span class="s1">id</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>controlled</span><span class="s7">:</span><span class="s1"> </span><span class="s12">false</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span>status</span><span class="s7">:</span><span class="s4"> </span><span class="s8">'stable'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">// stable, drift, certs, outage</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>projectPart</span><span class="s7">:</span><span class="s1"> </span><span class="s12">null</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Draw initial cards</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>drawPlayerCard</span><span class="s7">(</span><span class="s13">3</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>drawNewProject</span><span class="s7">();</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderAll</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>showModal</span><span class="s7">(</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">'Welcome to Cluster-Chaos!'</span><span class="s7">,</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">`You are the new Director of Hybrid Cloud Operations. You have &lt;strong&gt;30 days&lt;/strong&gt; to prove your worth by completing &lt;strong&gt;5 projects&lt;/strong&gt; while keeping the system stable.&lt;br&gt;&lt;br&gt;Good luck. You'll need it.`</span><span class="s7">,</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">'Begin Simulation'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>hideModal</span><span class="s7">();</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">'Simulation started. Good luck.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">);</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> renderAll</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderStatusPanel</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderClusterMap</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderPlayerHand</span><span class="s7">();</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> renderStatusPanel</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">turn</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">turn</span><span class="s7">}</span><span class="s8"> / </span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">maxTurns</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">actions</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">actions</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">cu</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">cu</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">projects</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">projectsCompleted</span><span class="s7">}</span><span class="s8"> / </span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">targetProjects</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> stabilityPercent </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">/</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">maxStability</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s13">100</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">stabilityBar</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">width </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">stabilityPercent</span><span class="s7">}</span><span class="s8">%`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">stabilityBar</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">stability</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s4">stabilityBar</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'h-6 rounded-full text-center text-white font-bold text-sm transition-all duration-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">stabilityPercent </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">60</span><span class="s7">)</span><span class="s1"> </span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">stabilityBar</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-blue-600'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">stabilityPercent </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">30</span><span class="s7">)</span><span class="s1"> </span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">stabilityBar</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-yellow-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">else</span><span class="s1"> </span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">stabilityBar</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-red-600'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderActiveProject</span><span class="s7">();</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> renderActiveProject</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> container </span><span class="s7">=</span><span class="s1"> </span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">activeProjectCard</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">activeProject</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> project </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">activeProject</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> requirementsHTML </span><span class="s7">=</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">requirements</span><span class="s7">.</span><span class="s1">map</span><span class="s7">(</span><span class="s1">req </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> isComplete </span><span class="s7">=</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">completedReqs</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">req</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> cluster </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">req</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> hasProjectPart </span><span class="s7">=</span><span class="s1"> cluster </span><span class="s7">&amp;&amp;</span><span class="s1"> cluster</span><span class="s7">.</span><span class="s1">projectPart </span><span class="s7">===</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">name</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;span class="px-2 py-1 rounded </span><span class="s7">${</span><span class="s4">isComplete </span><span class="s7">&amp;&amp;</span><span class="s4"> hasProjectPart </span><span class="s7">?</span><span class="s4"> </span><span class="s1">'bg-green-600'</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">'bg-gray-700'</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s4">req</span><span class="s7">}</span><span class="s1">&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}).</span><span class="s1">join</span><span class="s7">(</span><span class="s8">' '</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>container</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="font-bold text-blue-300"&gt;</span><span class="s7">${</span><span class="s4">project</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-sm text-gray-400 my-2"&gt;Requirements:&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex gap-2 justify-center flex-wrap"&gt;</span><span class="s7">${</span><span class="s4">requirementsHTML</span><span class="s7">}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-xs text-gray-500 mt-2"&gt;Reward: +</span><span class="s7">${</span><span class="s4">project</span><span class="s7">.</span><span class="s4">reward</span><span class="s7">.</span><span class="s4">stability</span><span class="s7">}</span><span class="s1"> Stability&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>container</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;p class="text-gray-500"&gt;No active project.&lt;/p&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> renderClusterMap</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> map </span><span class="s7">=</span><span class="s1"> </span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">clusterMap</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Clear existing spokes but not the hub</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>map</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'.cluster-spoke'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">el </span><span class="s7">=&gt;</span><span class="s1"> el</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">());</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>clusterLocations</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">loc </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> cluster </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">loc</span><span class="s7">.</span><span class="s1">id</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> spoke </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'div'</span><span class="s7">);</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>spoke</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`cluster-spoke flex justify-center items-center p-2 rounded-lg border-2 </span><span class="s7">${</span><span class="s4">loc</span><span class="s7">.</span><span class="s4">grid</span><span class="s7">}</span><span class="s1">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>spoke</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">locationId </span><span class="s7">=</span><span class="s1"> loc</span><span class="s7">.</span><span class="s1">id</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> borderColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'border-gray-700'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> statusDotColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bg-gray-600'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> statusText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Unmanaged'</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">controlled</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>borderColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'border-blue-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">switch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">status</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'stable'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusDotColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bg-green-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Stable'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'drift'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusDotColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bg-yellow-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Drifting'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'certs'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusDotColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bg-red-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Offline (Certs)'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'outage'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusDotColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bg-orange-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>statusText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Network Outage'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>spoke</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s1">borderColor</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> projectHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">projectPart</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>projectHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;div class="absolute top-1 right-1 w-4 h-4 bg-purple-500 rounded-full" title="Project: </span><span class="s7">${</span><span class="s4">cluster</span><span class="s7">.</span><span class="s4">projectPart</span><span class="s7">}</span><span class="s1">"&gt;&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>spoke</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="text-center relative"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="font-bold"&gt;</span><span class="s7">${</span><span class="s4">loc</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex items-center justify-center gap-2 mt-1"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="status-dot w-3 h-3 rounded-full </span><span class="s7">${</span><span class="s4">statusDotColor</span><span class="s7">}</span><span class="s1">"&gt;&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p class="text-sm text-gray-400"&gt;</span><span class="s7">${</span><span class="s4">statusText</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">${</span><span class="s4">projectHTML</span><span class="s7">}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>map</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">spoke</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> renderPlayerHand</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> hand </span><span class="s7">=</span><span class="s1"> </span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">playerHand</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>hand</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">hand</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">card</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> cardEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'div'</span><span class="s7">);</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>cardEl</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'card w-40 h-40 bg-gray-900 rounded-lg p-3 flex flex-col justify-between border border-gray-700 cursor-pointer'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>cardEl</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">cardIndex </span><span class="s7">=</span><span class="s1"> index</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> costColor </span><span class="s7">=</span><span class="s1"> card</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">&gt;</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'text-red-500'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'text-green-400'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> typeColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'text-gray-400'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">card</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Policy'</span><span class="s7">)</span><span class="s1"> typeColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'text-purple-400'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">card</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Cluster'</span><span class="s7">)</span><span class="s1"> typeColor </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'text-blue-400'</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>cardEl</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="font-bold text-base leading-tight"&gt;</span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="text-xs font-mono </span><span class="s7">${</span><span class="s4">typeColor</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">type</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-xs text-gray-300"&gt;</span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">text</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-right font-bold </span><span class="s7">${</span><span class="s4">costColor</span><span class="s7">}</span><span class="s1">"&gt;Cost: </span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">cost</span><span class="s7">}</span><span class="s1"> </span><span class="s15">$</span><span class="s1">CU&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>cardEl</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> onCardClick</span><span class="s7">(</span><span class="s1">index</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>hand</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">cardEl</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// --- GAME ACTIONS ---</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> drawPlayerCard</span><span class="s7">(</span><span class="s1">count </span><span class="s7">=</span><span class="s1"> </span><span class="s13">1</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;</span><span class="s1"> count</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">hand</span><span class="s7">.</span><span class="s1">length </span><span class="s7">&lt;</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">handLimit</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">playerDeck</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s1">'Player deck empty. Reshuffling discard pile.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>gameState</span><span class="s7">.</span><span class="s1">playerDeck </span><span class="s7">=</span><span class="s1"> shuffle</span><span class="s7">([...</span><span class="s1">cardDefinitions</span><span class="s7">.</span><span class="s1">player</span><span class="s7">]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">hand</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">playerDeck</span><span class="s7">.</span><span class="s1">pop</span><span class="s7">());</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> drawNewProject</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">projectsDeck</span><span class="s7">.</span><span class="s1">length </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> newProject </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">projectsDeck</span><span class="s7">.</span><span class="s1">pop</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>newProject</span><span class="s7">.</span><span class="s1">completedReqs </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">activeProject </span><span class="s7">=</span><span class="s1"> newProject</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">'No more projects available!'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">activeProject </span><span class="s7">=</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> onCardClick</span><span class="s7">(</span><span class="s1">cardIndex</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">actions </span><span class="s7">&lt;=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">'No actions remaining this turn.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> card </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">hand</span><span class="s7">[</span><span class="s1">cardIndex</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">card</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">&gt;</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">cu</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">`Not enough </span><span class="s15">$</span><span class="s1">CU to play </span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Use an action and CU</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">actions</span><span class="s7">--;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">-=</span><span class="s1"> card</span><span class="s7">.</span><span class="s1">cost</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Remove card from hand</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">hand</span><span class="s7">.</span><span class="s1">splice</span><span class="s7">(</span><span class="s1">cardIndex</span><span class="s7">,</span><span class="s1"> </span><span class="s13">1</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s8">`Played card: </span><span class="s7">${</span><span class="s1">card</span><span class="s7">.</span><span class="s1">name</span><span class="s7">}</span><span class="s8">.`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'action'</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Card specific logic</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>handleCardEffect</span><span class="s7">(</span><span class="s1">card</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderAll</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>checkGameOver</span><span class="s7">();</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> handleCardEffect</span><span class="s7">(</span><span class="s1">card</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">switch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">card</span><span class="s7">.</span><span class="s1">name</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Provision OpenShift'</span><span class="s7">:</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Provision EKS'</span><span class="s7">:</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Provision AKS'</span><span class="s7">:</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Provision GKE'</span><span class="s7">:</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Provision K3s Edge'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> targetCluster </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">card</span><span class="s7">.</span><span class="s1">clusterType</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">targetCluster </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s7">!</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">controlled</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>targetCluster</span><span class="s7">.</span><span class="s1">controlled </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s8">`</span><span class="s7">${</span><span class="s1">card</span><span class="s7">.</span><span class="s1">clusterType</span><span class="s7">}</span><span class="s8"> cluster is now online and managed.`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s1">`Cannot provision cluster at </span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">clusterType</span><span class="s7">}</span><span class="s1">. Location is already managed.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Refund for failed action</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">+=</span><span class="s1"> card</span><span class="s7">.</span><span class="s1">cost</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'GitOps Rollout'</span><span class="s7">:</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// This card is powerful and needs a target</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>promptForTarget</span><span class="s7">(</span><span class="s1">'Select a cluster to apply GitOps Rollout:'</span><span class="s7">,</span><span class="s4"> cluster </span><span class="s7">=&gt;</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'drift'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'stable'</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                    </span>logToConsole</span><span class="s7">(</span><span class="s1">`Configuration drift on </span><span class="s7">${</span><span class="s4">cluster</span><span class="s7">.</span><span class="s4">id</span><span class="s7">}</span><span class="s1"> has been resolved.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'action'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>deployProjectRequirement</span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>renderAll</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Fleet Observability'</span><span class="s7">:</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Special UI for this</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>showFleetObservabilityModal</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Disaster Recovery'</span><span class="s7">:</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// This is a reactive card, but for single player, let's make it proactive</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">disasterRecovery </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">'Disaster Recovery plan is active. The next damaging Chaos Event will be negated.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Scale Up'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">+=</span><span class="s1"> </span><span class="s13">3</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Expert Consultation'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>drawPlayerCard</span><span class="s7">(</span><span class="s13">2</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Implement GitOps Standard'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">gitops </span><span class="s7">=</span><span class="s1"> </span><span class="s13">5</span><span class="s7">;</span><span class="s1"> </span><span class="s9">// Lasts 5 turns</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">'GitOps Standard policy active.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Standardize Security Posture'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">security </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">'Security Posture policy active.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'Automated Auditing'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">auditing </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">'Automated Auditing policy active.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> deployProjectRequirement</span><span class="s7">(</span><span class="s1">locationId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> project </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">activeProject</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> cluster </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">locationId</span><span class="s7">];</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">project</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">'No active project to deploy.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">cluster </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">controlled</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">`Cannot deploy to </span><span class="s7">${</span><span class="s4">locationId</span><span class="s7">}</span><span class="s1">, it is not a managed cluster.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'stable'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">`Cannot deploy to </span><span class="s7">${</span><span class="s4">locationId</span><span class="s7">}</span><span class="s1">, cluster is not stable.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">project</span><span class="s7">.</span><span class="s1">requirements</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">locationId</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">`This project does not have a requirement for </span><span class="s7">${</span><span class="s4">locationId</span><span class="s7">}</span><span class="s1">.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">project</span><span class="s7">.</span><span class="s1">completedReqs</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">locationId</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">`Requirement for </span><span class="s7">${</span><span class="s4">locationId</span><span class="s7">}</span><span class="s1"> is already complete.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Success</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s8">`Deploying project "</span><span class="s7">${</span><span class="s1">project</span><span class="s7">.</span><span class="s1">name</span><span class="s7">}</span><span class="s8">" to </span><span class="s7">${</span><span class="s1">locationId</span><span class="s7">}</span><span class="s8">.`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'action'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>project</span><span class="s7">.</span><span class="s1">completedReqs</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">locationId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>cluster</span><span class="s7">.</span><span class="s1">projectPart </span><span class="s7">=</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">name</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">gitops </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>changeStability</span><span class="s7">(</span><span class="s13">5</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'GitOps Standard bonus'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Check for project completion</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> isComplete </span><span class="s7">=</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">requirements</span><span class="s7">.</span><span class="s1">every</span><span class="s7">(</span><span class="s1">req </span><span class="s7">=&gt;</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">completedReqs</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">req</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">isComplete</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">projectsCompleted</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>changeStability</span><span class="s7">(</span><span class="s1">project</span><span class="s7">.</span><span class="s1">reward</span><span class="s7">.</span><span class="s1">stability</span><span class="s7">,</span><span class="s1"> </span><span class="s8">`Project "</span><span class="s7">${</span><span class="s1">project</span><span class="s7">.</span><span class="s1">name</span><span class="s7">}</span><span class="s8">" completed`</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>project</span><span class="s7">.</span><span class="s1">requirements</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">req </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">req</span><span class="s7">].</span><span class="s1">projectPart </span><span class="s7">=</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>drawNewProject</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderAll</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>checkGameOver</span><span class="s7">();</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> promptForTarget</span><span class="s7">(</span><span class="s1">promptText</span><span class="s7">,</span><span class="s1"> callback</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// A simple implementation using a modal</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> validClusters </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Object</span><span class="s7">.</span><span class="s1">entries</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(([</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> cluster</span><span class="s7">])</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> cluster</span><span class="s7">.</span><span class="s1">controlled</span><span class="s7">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">.</span><span class="s1">map</span><span class="s7">(([</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> cluster</span><span class="s7">])</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> id</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">validClusters</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">'No valid targets available.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> buttonsHTML </span><span class="s7">=</span><span class="s1"> validClusters</span><span class="s7">.</span><span class="s1">map</span><span class="s7">(</span><span class="s1">id </span><span class="s7">=&gt;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">`&lt;button class="bg-blue-500 hover:bg-blue-600 p-2 rounded" data-id="</span><span class="s7">${</span><span class="s4">id</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s4">id</span><span class="s7">}</span><span class="s1">&lt;/button&gt;`</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">).</span><span class="s1">join</span><span class="s7">(</span><span class="s8">''</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>showModal</span><span class="s7">(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>promptText</span><span class="s7">,</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">`&lt;div class="flex flex-wrap gap-2 justify-center"&gt;</span><span class="s7">${</span><span class="s4">buttonsHTML</span><span class="s7">}</span><span class="s1">&lt;/div&gt;`</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">'Cancel'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>hideModal</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">content</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'button[data-id]'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">btn </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>btn</span><span class="s7">.</span><span class="s1">onclick </span><span class="s7">=</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> clusterId </span><span class="s7">=</span><span class="s1"> btn</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">id</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> clusterData </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">...</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">clusterId</span><span class="s7">],</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> clusterId </span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>callback</span><span class="s7">(</span><span class="s1">clusterData</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>hideModal</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> showFleetObservabilityModal</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> topCards </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">chaosDeck</span><span class="s7">.</span><span class="s1">slice</span><span class="s7">(-</span><span class="s13">3</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">topCards</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">'Chaos deck is empty.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> cardsHTML </span><span class="s7">=</span><span class="s1"> topCards</span><span class="s7">.</span><span class="s1">map</span><span class="s7">((</span><span class="s1">card</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-700 p-3 rounded text-left cursor-pointer border-2 border-transparent hover:border-red-500" data-index="</span><span class="s7">${</span><span class="s4">index</span><span class="s7">}</span><span class="s1">"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="font-bold text-red-400"&gt;</span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-xs"&gt;</span><span class="s7">${</span><span class="s4">card</span><span class="s7">.</span><span class="s4">text</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">    </span>`</span><span class="s7">).</span><span class="s4">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>showModal</span><span class="s7">(</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">'Fleet Observability'</span><span class="s7">,</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">`You foresee potential futures. Choose one event to avert (move to bottom of deck).&lt;br&gt;&lt;div class="mt-4 grid gap-2"&gt;</span><span class="s7">${</span><span class="s4">cardsHTML</span><span class="s7">}</span><span class="s1">&lt;/div&gt;`</span><span class="s7">,</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">'Do Nothing'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>hideModal</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">modal</span><span class="s7">.</span><span class="s1">content</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'div[data-index]'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">cardEl </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>cardEl</span><span class="s7">.</span><span class="s1">onclick </span><span class="s7">=</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> cardIndexInTop3 </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">cardEl</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">index</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> cardIndexInDeck </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">chaosDeck</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> </span><span class="s13">3</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> cardIndexInTop3</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">cardToMove</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">chaosDeck</span><span class="s7">.</span><span class="s1">splice</span><span class="s7">(</span><span class="s1">cardIndexInDeck</span><span class="s7">,</span><span class="s1"> </span><span class="s13">1</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">chaosDeck</span><span class="s7">.</span><span class="s1">unshift</span><span class="s7">(</span><span class="s1">cardToMove</span><span class="s7">);</span><span class="s1"> </span><span class="s9">// Add to bottom (front of array)</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">`Averted a potential "</span><span class="s7">${</span><span class="s4">cardToMove</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">" event through superior observability.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'action'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>hideModal</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// --- GAME LOOP ---</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> nextTurn</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">gameOver</span><span class="s7">)</span><span class="s1"> </span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// --- 1. PRE-TURN PHASE: Update lingering effects ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">Object</span><span class="s7">.</span><span class="s1">values</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">cluster </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'drift'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>changeStability</span><span class="s7">(-</span><span class="s13">2</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Configuration Drift'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">auditing</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> hasBadStatus </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Object</span><span class="s7">.</span><span class="s1">values</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">).</span><span class="s1">some</span><span class="s7">(</span><span class="s1">c </span><span class="s7">=&gt;</span><span class="s1"> c</span><span class="s7">.</span><span class="s1">controlled </span><span class="s7">&amp;&amp;</span><span class="s1"> c</span><span class="s7">.</span><span class="s1">status </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'stable'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">hasBadStatus</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>changeStability</span><span class="s7">(</span><span class="s13">3</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Automated Auditing bonus'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">gitops </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">gitops</span><span class="s7">--;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// --- 2. CHAOS PHASE ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">turn</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s8">`--- Day </span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">turn</span><span class="s7">}</span><span class="s8"> Begins ---`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">chaosDeck</span><span class="s7">.</span><span class="s1">length </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> event </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">chaosDeck</span><span class="s7">.</span><span class="s1">pop</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>handleChaosEvent</span><span class="s7">(</span><span class="s1">event</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>logToConsole</span><span class="s7">(</span><span class="s1">'The chaos subsides... for now.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// --- 3. RESOURCE PHASE ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> cuGained </span><span class="s7">=</span><span class="s1"> </span><span class="s13">3</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">Object</span><span class="s7">.</span><span class="s1">values</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">cluster </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">cluster</span><span class="s7">.</span><span class="s1">controlled </span><span class="s7">&amp;&amp;</span><span class="s1"> cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'certs'</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'outage'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>cuGained</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">cluster</span><span class="s7">.</span><span class="s4">status </span><span class="s7">===</span><span class="s4"> </span><span class="s8">'outage'</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Outage only lasts one turn</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>cluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'stable'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">+=</span><span class="s1"> cuGained</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s8">`Gained </span><span class="s7">${</span><span class="s1">cuGained</span><span class="s7">}</span><span class="s8"> </span><span class="s15">$</span><span class="s8">CU.`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>drawPlayerCard</span><span class="s7">(</span><span class="s13">1</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// --- 4. ACTION PHASE RESET ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">actions </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">maxActions</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>renderAll</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>checkGameOver</span><span class="s7">();</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> handleChaosEvent</span><span class="s7">(</span><span class="s1">event</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s8">`CHAOS EVENT: </span><span class="s7">${</span><span class="s1">event</span><span class="s7">.</span><span class="s1">name</span><span class="s7">}</span><span class="s8">`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'chaos'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s1">event</span><span class="s7">.</span><span class="s1">text</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'chaos'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">disasterRecovery</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s4"> </span><span class="s7">([</span><span class="s1">'drift'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'vulnerability'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'certs'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'failed_deployment'</span><span class="s7">].</span><span class="s4">includes</span><span class="s7">(</span><span class="s4">event</span><span class="s7">.</span><span class="s4">effect</span><span class="s7">))</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">'Disaster Recovery plan activated! The event is negated.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'action'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>changeStability</span><span class="s7">(</span><span class="s13">5</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Disaster Recovery'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">disasterRecovery </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> controlledClusters </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Object</span><span class="s7">.</span><span class="s1">entries</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">).</span><span class="s1">filter</span><span class="s7">(([</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> c</span><span class="s7">])</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> c</span><span class="s7">.</span><span class="s1">controlled</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> targetCluster </span><span class="s7">=</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">controlledClusters</span><span class="s7">.</span><span class="s1">length </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> cluster</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> controlledClusters</span><span class="s7">[</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> controlledClusters</span><span class="s7">.</span><span class="s1">length</span><span class="s7">)];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>targetCluster </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">...</span><span class="s1">cluster</span><span class="s7">,</span><span class="s1"> id </span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">switch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">event</span><span class="s7">.</span><span class="s1">effect</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'drift'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">targetCluster</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>targetCluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'drift'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">].</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'drift'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s8">`</span><span class="s7">${</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">}</span><span class="s8"> is now drifting.`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'vulnerability'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> stabilityLoss </span><span class="s7">=</span><span class="s1"> </span><span class="s13">20</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">activePolicies</span><span class="s7">.</span><span class="s1">security</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>stabilityLoss </span><span class="s7">/=</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s1">'Security Posture policy reduces stability loss.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">&gt;=</span><span class="s1"> </span><span class="s13">3</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">-=</span><span class="s1"> </span><span class="s13">3</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s1">'Paid 3 $CU for emergency patching.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'action'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>changeStability</span><span class="s7">(-</span><span class="s1">stabilityLoss</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Security Vulnerability'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'certs'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">targetCluster</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>targetCluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'certs'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">].</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'certs'</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Simple manual fix for this one</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>showModal</span><span class="s7">(</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">'Expired Certificates!'</span><span class="s7">,</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">`The cluster at </span><span class="s7">${</span><span class="s4">targetCluster</span><span class="s7">.</span><span class="s4">id</span><span class="s7">}</span><span class="s1"> is offline due to expired certs. Pay 2 </span><span class="s15">$</span><span class="s1">CU to fix it now?`</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">'Pay 2 $CU'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">&gt;=</span><span class="s1"> </span><span class="s13">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">-=</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">].</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'stable'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>logToConsole</span><span class="s7">(</span><span class="s8">`Certs renewed for </span><span class="s7">${</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">}</span><span class="s8">.`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'action'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>logToConsole</span><span class="s7">(</span><span class="s8">'Not enough $CU to renew certs.'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>renderAll</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>hideModal</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'outage'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">targetCluster</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>targetCluster</span><span class="s7">.</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'outage'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">targetCluster</span><span class="s7">.</span><span class="s1">id</span><span class="s7">].</span><span class="s1">status </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'outage'</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                </span>logToConsole</span><span class="s7">(</span><span class="s1">`</span><span class="s7">${</span><span class="s4">targetCluster</span><span class="s7">.</span><span class="s4">id</span><span class="s7">}</span><span class="s1"> will not produce resources next turn.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'budget_cut'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> loss </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">cu </span><span class="s7">-=</span><span class="s1"> loss</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>logToConsole</span><span class="s7">(</span><span class="s1">`Lost </span><span class="s7">${</span><span class="s4">loss</span><span class="s7">}</span><span class="s1"> </span><span class="s15">$</span><span class="s1">CU due to budget cuts.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'meeting'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">maxActions </span><span class="s7">=</span><span class="s1"> </span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameState</span><span class="s7">.</span><span class="s1">actions </span><span class="s7">=</span><span class="s1"> </span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s1"> </span><span class="s8">'calm'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>changeStability</span><span class="s7">(</span><span class="s13">5</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'A Moment of Calm'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'failed_deployment'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> clustersWithProjects </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Object</span><span class="s7">.</span><span class="s1">entries</span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">).</span><span class="s1">filter</span><span class="s7">(([</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> c</span><span class="s7">])</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> c</span><span class="s7">.</span><span class="s1">projectPart</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">clustersWithProjects</span><span class="s7">.</span><span class="s1">length </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> cluster</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> clustersWithProjects</span><span class="s7">[</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> clustersWithProjects</span><span class="s7">.</span><span class="s1">length</span><span class="s7">)];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> projectName </span><span class="s7">=</span><span class="s1"> cluster</span><span class="s7">.</span><span class="s1">projectPart</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> project </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">activeProject</span><span class="s7">.</span><span class="s1">name </span><span class="s7">===</span><span class="s1"> projectName </span><span class="s7">?</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">activeProject </span><span class="s7">:</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span><span class="s1"> </span><span class="s9">// simplified check</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">project</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>project</span><span class="s7">.</span><span class="s1">completedReqs </span><span class="s7">=</span><span class="s1"> project</span><span class="s7">.</span><span class="s1">completedReqs</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">r </span><span class="s7">=&gt;</span><span class="s1"> r </span><span class="s7">!==</span><span class="s1"> id</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>gameState</span><span class="s7">.</span><span class="s1">clusters</span><span class="s7">[</span><span class="s1">id</span><span class="s7">].</span><span class="s1">projectPart </span><span class="s7">=</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">                    </span>logToConsole</span><span class="s7">(</span><span class="s1">`A deployment failed at </span><span class="s7">${</span><span class="s4">id</span><span class="s7">}</span><span class="s1">, rolling back progress on "</span><span class="s7">${</span><span class="s4">projectName</span><span class="s7">}</span><span class="s1">".`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'warn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Reset max actions if it was changed</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">event</span><span class="s7">.</span><span class="s1">effect </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'meeting'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">maxActions </span><span class="s7">=</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> changeStability</span><span class="s7">(</span><span class="s1">amount</span><span class="s7">,</span><span class="s1"> reason</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">+=</span><span class="s1"> amount</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">&gt;</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">maxStability</span><span class="s7">)</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">maxStability</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>logToConsole</span><span class="s7">(</span><span class="s8">`</span><span class="s7">${</span><span class="s1">reason</span><span class="s7">}</span><span class="s8">: Stability </span><span class="s7">${</span><span class="s1">amount </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'+'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">}${</span><span class="s1">amount</span><span class="s7">}</span><span class="s8">. Current: </span><span class="s7">${</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">stability</span><span class="s7">}</span><span class="s8">`</span><span class="s7">,</span><span class="s1"> amount </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'info'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'warn'</span><span class="s7">);</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> checkGameOver</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">gameOver</span><span class="s7">)</span><span class="s1"> </span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> gameOver </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> title </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s1"> text </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">stability </span><span class="s7">&lt;=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameOver </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>title </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'Simulation Failed: System Collapse'</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>text </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'System stability dropped to zero. The environment spiraled into unmanageable chaos. Your access has been revoked.'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">turn </span><span class="s7">&gt;</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">maxTurns</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameState</span><span class="s7">.</span><span class="s1">projectsCompleted </span><span class="s7">&gt;=</span><span class="s1"> gameState</span><span class="s7">.</span><span class="s1">targetProjects</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameOver </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>title </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'Simulation Successful!'</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>text </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`You successfully completed </span><span class="s7">${</span><span class="s4">gameState</span><span class="s7">.</span><span class="s4">projectsCompleted</span><span class="s7">}</span><span class="s1"> projects and ended the quarter with </span><span class="s7">${</span><span class="s4">gameState</span><span class="s7">.</span><span class="s4">stability</span><span class="s7">}</span><span class="s1"> stability. You have tamed the chaos and secured your budget!`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameOver </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>title </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'Simulation Failed: Goals Not Met'</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span>text </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`The quarter has ended, but you only completed </span><span class="s7">${</span><span class="s4">gameState</span><span class="s7">.</span><span class="s4">projectsCompleted</span><span class="s7">}</span><span class="s1"> of the required </span><span class="s7">${</span><span class="s4">gameState</span><span class="s7">.</span><span class="s4">targetProjects</span><span class="s7">}</span><span class="s1"> projects. Management has decided to go in a "different direction".`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameOver</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameState</span><span class="s7">.</span><span class="s1">gameOver </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">endDayBtn</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>showModal</span><span class="s7">(</span><span class="s1">title</span><span class="s7">,</span><span class="s1"> text</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Restart Simulation'</span><span class="s7">,</span><span class="s1"> init</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// --- EVENT LISTENERS ---</span></p>
<p class="p4"><span class="s14">DOMElements</span><span class="s7">.</span><span class="s1">endDayBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> nextTurn</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">// --- INITIALIZE GAME ---</span></p>
<p class="p4"><span class="s1">document</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'DOMContentLoaded'</span><span class="s7">,</span><span class="s1"> init</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
</body>
</html>
